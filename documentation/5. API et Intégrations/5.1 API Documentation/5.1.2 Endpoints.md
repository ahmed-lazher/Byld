#### üì° 5.1.2 Endpoints.md

##### Liste des API

Cette document pr√©sente les endpoints essentiels de l'API de la plateforme Byld, couvrant la gestion des utilisateurs, des projets, des devis, des paiements, des notifications, des chats et bien plus encore. Chaque section est structur√©e pour inclure la m√©thode HTTP, l'URL de l'endpoint, la description, les param√®tres, le format de la requ√™te, les r√©ponses possibles et les codes d'erreur.

---

###### 5.1.2.1. Utilisateurs

####### 5.1.2.1.1. R√©cup√©rer tous les utilisateurs
- **M√©thode :** `GET`
- **Endpoint :** `/api/users`
- **Description :** R√©cup√®re la liste de tous les utilisateurs dans le syst√®me.
- **R√©ponse :**
    - **200 OK**
    ```json
    [
      {
        "id": "uuid",
        "email": "user@example.com",
        "name": "John Doe",
        "role": "USER",
        "createdAt": "2023-01-01T00:00:00Z",
        "updatedAt": "2023-01-01T00:00:00Z"
      }
    ]
    ```
    - **401 Unauthorized** : Si l'utilisateur n'est pas authentifi√©.

####### 5.1.2.1.2. R√©cup√©rer un utilisateur par ID
- **M√©thode :** `GET`
- **Endpoint :** `/api/users/{id}`
- **Description :** R√©cup√®re les informations d'un utilisateur sp√©cifique en fonction de l'ID fourni.
- **Param√®tres :**
    - `id` (path) : ID de l'utilisateur √† r√©cup√©rer.
- **R√©ponse :**
    - **200 OK**
    ```json
    {
      "id": "uuid",
      "email": "user@example.com",
      "name": "John Doe",
      "role": "USER",
      "createdAt": "2023-01-01T00:00:00Z",
      "updatedAt": "2023-01-01T00:00:00Z",
      "profile": {
        "firstName": "John",
        "lastName": "Doe",
        "phone": "1234567890",
        "address": "123 Main St",
        "avatar": "http://example.com/avatar.jpg"
      }
    }
    ```
    - **404 Not Found** : Si l'utilisateur n'existe pas.
    - **401 Unauthorized** : Si l'utilisateur n'est pas authentifi√©.

####### 5.1.2.1.3. Cr√©er un nouvel utilisateur
- **M√©thode :** `POST`
- **Endpoint :** `/api/users`
- **Description :** Cr√©e un nouvel utilisateur avec les informations fournies.
- **Corps de la requ√™te :**
```json
{
  "email": "newuser@example.com",
  "password": "securePassword123",
  "role": "USER",
  "profile": {
    "firstName": "John",
    "lastName": "Doe",
    "phone": "1234567890",
    "address": "123 Main St"
  }
}
```
- **R√©ponse :**
    - **201 Created**
    ```json
    {
      "id": "uuid",
      "email": "newuser@example.com",
      "name": "John Doe",
      "role": "USER",
      "createdAt": "2023-01-01T00:00:00Z",
      "updatedAt": "2023-01-01T00:00:00Z"
    }
    ```
    - **400 Bad Request** : Si les donn√©es fournies sont invalides.
    - **409 Conflict** : Si l'email est d√©j√† utilis√©.

###### 5.1.2.2. Projets

####### 5.1.2.2.1. Cr√©er un nouveau projet
- **M√©thode :** `POST`
- **Endpoint :** `/api/projects`
- **Description :** Cr√©e un nouveau projet de r√©novation avec les informations fournies.
- **Corps de la requ√™te :**
```json
{
  "userId": "uuid",
  "name": "Renovation Project",
  "location": "Paris, France",
  "floor": 2,
  "rooms": 5,
  "description": "Description of the project.",
  "technicalInfo": "Technical specifications here.",
  "materials": {},
  "status": "DRAFT"
}
```
- **R√©ponse :**
    - **201 Created**
    ```json
    {
      "id": "uuid",
      "userId": "uuid",
      "name": "Renovation Project",
      "location": "Paris, France",
      "floor": 2,
      "rooms": 5,
      "status": "DRAFT",
      "createdAt": "2023-01-01T00:00:00Z",
      "updatedAt": "2023-01-01T00:00:00Z"
    }
    ```
    - **400 Bad Request** : Si les donn√©es fournies sont invalides.
    - **401 Unauthorized** : Si l'utilisateur n'est pas authentifi√©.

####### 5.1.2.2.2. R√©cup√©rer tous les projets
- **M√©thode :** `GET`
- **Endpoint :** `/api/projects`
- **Description :** R√©cup√®re la liste de tous les projets existants.
- **R√©ponse :**
    - **200 OK**
    ```json
    [
      {
        "id": "uuid",
        "name": "Renovation Project",
        "location": "Paris, France",
        "status": "IN_PROGRESS",
        "createdAt": "2023-01-01T00:00:00Z",
        "updatedAt": "2023-01-01T00:00:00Z"
      }
    ]
    ```
    - **401 Unauthorized** : Si l'utilisateur n'est pas authentifi√©.

####### 5.1.2.2.3. R√©cup√©rer un projet par ID
- **M√©thode :** `GET`
- **Endpoint :** `/api/projects/{id}`
- **Description :** R√©cup√®re les d√©tails d'un projet sp√©cifique en fonction de l'ID fourni.
- **Param√®tres :**
    - `id` (path) : ID du projet √† r√©cup√©rer.
- **R√©ponse :**
    - **200 OK**
    ```json
    {
      "id": "uuid",
      "userId": "uuid",
      "name": "Renovation Project",
      "location": "Paris, France",
      "status": "IN_PROGRESS",
      "createdAt": "2023-01-01T00:00:00Z",
      "updatedAt": "2023-01-01T00:00:00Z"
    }
    ```
    - **404 Not Found** : Si le projet n'existe pas.

###### 5.1.2.3. Devis

####### 5.1.2.3.1. Cr√©er un nouveau devis
- **M√©thode :** `POST`
- **Endpoint :** `/api/quotes`
- **Description :** Cr√©e un nouveau devis pour un projet sp√©cifi√©.
- **Corps de la requ√™te :**
```json
{
  "projectId": "uuid",
  "companyId": "uuid",
  "totalCost": 5000.00,
  "details": {},
  "availability": "2023-12-01T00:00:00Z",
  "estimatedDuration": 30,
  "status": "PENDING"
}
```
- **R√©ponse :**
    - **201 Created**
    ```json
    {
      "id": "uuid",
      "projectId": "uuid",
      "companyId": "uuid",
      "totalCost": 5000.00,
      "status": "PENDING",
      "createdAt": "2023-01-01T00:00:00Z",
      "updatedAt": "2023-01-01T00:00:00Z"
    }
    ```
    - **400 Bad Request** : Si les donn√©es fournies sont invalides.
    - **401 Unauthorized** : Si l'utilisateur n'est pas authentifi√©.

####### 5.1.2.3.2. R√©cup√©rer tous les devis
- **M√©thode :** `GET`
- **Endpoint :** `/api/quotes`
- **Description :** R√©cup√®re la liste de tous les devis disponibles.
- **R√©ponse :**
    - **200 OK**
    ```json
    [
      {
        "id": "uuid",
        "projectId": "uuid",
        "companyId": "uuid",
        "totalCost": 5000.00,
        "status": "PENDING",
        "createdAt": "2023-01-01T00:00:00Z"
      }
    ]
    ```
    - **401 Unauthorized** : Si l'utilisateur n'est pas authentifi√©.

####### 5.1.2.3.3. R√©cup√©rer un devis par ID
- **M√©thode :** `GET`
- **Endpoint :** `/api/quotes/{id}`
- **Description :** R√©cup√®re les d√©tails d'un devis sp√©cifique en fonction de l'ID.
- **Param√®tres :**
    - `id` (path) : ID du devis √† r√©cup√©rer.
- **R√©ponse :**
    - **200 OK**
    ```json
    {
      "id": "uuid",
      "projectId": "uuid",
      "companyId": "uuid",
      "totalCost": 5000.00,
      "status": "PENDING",
      "details": {},
      "createdAt": "2023-01-01T00:00:00Z"
    }
    ```
    - **404 Not Found** : Si le devis n'existe pas.
    - **401 Unauthorized** : Si l'utilisateur n'est pas authentifi√©.

###### 5.1.2.4. Paiements

####### 5.1.2.4.1. Cr√©er un nouveau paiement
- **M√©thode :** `POST`
- **Endpoint :** `/api/payments`
- **Description :** Cr√©e un nouveau paiement pour un utilisateur.
- **Corps de la requ√™te :**
```json
{
  "userId": "uuid",
  "amount": 5000.00,
  "status": "PENDING"
}
```
- **R√©ponse :**
    - **201 Created**
    ```json
    {
      "id": "uuid",
      "userId": "uuid",
      "amount": 5000.00,
      "status": "PENDING",
      "createdAt": "2023-01-01T00:00:00Z"
    }
    ```
    - **400 Bad Request** : Si les donn√©es fournies sont invalides.

####### 5.1.2.4.2. R√©cup√©rer tous les paiements
- **M√©thode :** `GET`
- **Endpoint :** `/api/payments`
- **Description :** R√©cup√®re la liste de tous les paiements.
- **R√©ponse :**
    - **200 OK**
    ```json
    [
      {
        "id": "uuid",
        "userId": "uuid",
        "amount": 5000.00,
        "status": "PENDING",
        "createdAt": "2023-01-01T00:00:00Z"
      }
    ]
    ```
    - **401 Unauthorized** : Si l'utilisateur n'est pas authentifi√©.

###### 5.1.2.5. Notifications

####### 5.1.2.5.1. R√©cup√©rer toutes les notifications
- **M√©thode :** `GET`
- **Endpoint :** `/api/notifications`
- **Description :** R√©cup√®re toutes les notifications pour l'utilisateur authentifi√©.
- **R√©ponse :**
    - **200 OK**
    ```json
    [
      {
        "id": "uuid",
        "userId": "uuid",
        "content": "Your project has been updated.",
        "isRead": false,
        "createdAt": "2023-01-01T00:00:00Z"
      }
    ]
    ```
    - **401 Unauthorized** : Si l'utilisateur n'est pas authentifi√©.

###### 5.1.2.6. Chats

####### 5.1.2.6.1. Cr√©er un nouveau chat
- **M√©thode :** `POST`
- **Endpoint :** `/api/chats`
- **Description :** Cr√©e un nouveau chat pour un projet donn√©.
- **Corps de la requ√™te :**
```json
{
  "projectId": "uuid"
}
```
- **R√©ponse :**
    - **201 Created**
    ```json
    {
      "id": "uuid",
      "projectId": "uuid",
      "createdAt": "2023-01-01T00:00:00Z"
    }
    ```
    - **400 Bad Request** : Si le `projectId` n'est pas valide.

####### 5.1.2.6.2. R√©cup√©rer tous les chats d'un projet
- **M√©thode :** `GET`
- **Endpoint :** `/api/chats/{projectId}`
- **Description :** R√©cup√®re tous les chats d'un projet sp√©cifique.
- **Param√®tres :**
    - `projectId` (path) : ID du projet pour lequel r√©cup√©rer les chats.
- **R√©ponse :**
    - **200 OK**
    ```json
    [
      {
        "id": "uuid",
        "projectId": "uuid",
        "messages": []
      }
    ]
    ```
    - **404 Not Found** : Si le projet n'existe pas.
    - **401 Unauthorized** : Si l'utilisateur n'est pas authentifi√©.

###### 5.1.2.7. Messages

####### 5.1.2.7.1. Envoyer un message
- **M√©thode :** `POST`
- **Endpoint :** `/api/messages`
- **Description :** Envoie un message dans un chat sp√©cifique.
- **Corps de la requ√™te :**
```json
{
  "chatId": "uuid",
  "userId": "uuid",
  "content": "Hello, this is a message."
}
```
- **R√©ponse :**
    - **201 Created**
    ```json
    {
      "id": "uuid",
      "chatId": "uuid",
      "userId": "uuid",
      "content": "Hello, this is a message.",
      "createdAt": "2023-01-01T00:00:00Z"
    }
    ```
    - **400 Bad Request** : Si les donn√©es fournies sont invalides.

###### 5.1.2.8. Gestion des erreurs

- Chaque endpoint doit g√©rer les erreurs de mani√®re appropri√©e, renvoyant des r√©ponses HTTP ad√©quates et des messages d‚Äôerreur informatifs pour aider au d√©bogage et √† l‚Äôutilisation efficace de l'API.

###### 5.1.2.9. Conclusion

Cette documentation pr√©sente tous les endpoints essentiels pour le projet Byld, permettant une gestion compl√®te des utilisateurs, projets, devis, paiements, notifications, chats et messages. Une bonne pratique consiste √† toujours v√©rifier que les utilisateurs sont authentifi√©s avant d'acc√©der √† des donn√©es sensibles et √† g√©rer les exceptions de mani√®re appropri√©e pour assurer une exp√©rience utilisateur fluide et s√©curis√©e.