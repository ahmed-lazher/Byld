#### üìä 2.2.2 Sch√©ma de Base de Donn√©es.md

##### 2.2.2.1. Introduction

Ce document d√©taille le sch√©ma de la base de donn√©es de Byld, une plateforme d√©di√©e √† la gestion de projets de r√©novation immobili√®re. Le mod√®le de donn√©es est con√ßu pour r√©pondre aux besoins fonctionnels de la plateforme tout en garantissant une int√©grit√© et une efficacit√© adapt√©es aux op√©rations requises. Ce sch√©ma inclut les entit√©s principales, leurs relations ainsi que les attributs significatifs.

---

##### 2.2.2.2. Mod√®le de Donn√©es

###### 2.2.2.2.1 √ânum√©rations

- **Role**: D√©finit les diff√©rents types d'utilisateurs de la plateforme.
  - `USER`: Utilisateur standard (Client)
  - `PRO`: Professionnel (Entreprise)
  - `ADMIN`: Administrateur

- **ProjectStatus**: Statuts possibles pour les projets.
  - `DRAFT`: Projet en cours de cr√©ation.
  - `PENDING`: Projet en attente de validation.
  - `IN_PROGRESS`: Projet en cours d‚Äôex√©cution.
  - `COMPLETED`: Projet termin√©.
  - `CANCELLED`: Projet annul√©.

- **PaymentStatus**: Statuts des paiements.
  - `PENDING`: Paiement en attente.
  - `SUCCESS`: Paiement r√©ussi.
  - `FAILED`: √âchec du paiement.
  - `REFUNDED`: Remboursement effectu√©.

- **DocumentType**: Types de documents associ√©s aux projets.
  - `PLAN`: Plans de conception.
  - `PHOTO`: Photos du projet.
  - `FINANCEMENT`: Documents de financement.
  - `RENOVATION`: Documents relatifs √† la r√©novation.
  - `VENTE`: Documents de vente.
  - `AUTRE`: Autres types de documents.

- **QuoteStatus**: Statuts des devis.
  - `PENDING`: Devis en attente de r√©vision.
  - `ACCEPTED`: Devis accept√©.
  - `REJECTED`: Devis rejet√©.
  - `IN_REVIEW`: Devis en cours de r√©vision.

- **TaskStatus**: Statuts des t√¢ches dans un projet.
  - `PENDING`: T√¢che en attente.
  - `IN_PROGRESS`: T√¢che en cours.
  - `COMPLETED`: T√¢che termin√©e.
  - `DELAYED`: T√¢che retard√©e.

###### 2.2.2.2.2 Mod√®les des Entit√©s

1. **User**
   - **Attributs**:
     - `id`: Identifiant unique de l'utilisateur (UUID).
     - `email`: Adresse email unique.
     - `password`: Mot de passe de l'utilisateur (hash√©).
     - `role`: R√¥le de l'utilisateur (`Role`).
     - `createdAt`: Date de cr√©ation (par d√©faut, maintenant).
     - `updatedAt`: Date de mise √† jour (automatique).
   - **Relations**:
     - Un utilisateur peut avoir un **Profile**, plusieurs **Project**, **Company**, **Message**, **Payment**, **Notification**, et √©ventuellement une **Subscription**.

2. **Profile**
   - **Attributs**:
     - `id`: Identifiant unique du profil (UUID).
     - `userId`: R√©f√©rence √† l'utilisateur (UUID).
     - `firstName`: Pr√©nom de l'utilisateur.
     - `lastName`: Nom de famille.
     - `phone`: Num√©ro de t√©l√©phone (optionnel).
     - `address`: Adresse (optionnel).
     - `avatar`: URL de l'avatar (optionnel).
   - **Relations**:
     - Li√© √† un unique `User`.

3. **Subscription**
   - **Attributs**:
     - `id`: Identifiant unique de l'abonnement (UUID).
     - `userId`: R√©f√©rence √† l'utilisateur (UUID).
     - `plan`: Nom du plan d'abonnement.
     - `startDate`: Date de d√©but de l'abonnement.
     - `endDate`: Date de fin de l'abonnement.
     - `status`: Statut de l'abonnement (par d√©faut, "ACTIVE").
   - **Relations**:
     - Li√© √† un unique `User`.

4. **Project**
   - **Attributs**:
     - `id`: Identifiant unique du projet (UUID).
     - `userId`: R√©f√©rence √† l'utilisateur (UUID).
     - `name`: Nom du projet.
     - `location`: Localisation du projet.
     - `floor`: √âtage (optionnel).
     - `rooms`: Nombre de pi√®ces (optionnel).
     - `description`: Description (optionnel).
     - `technicalInfo`: Informations techniques (optionnel).
     - `materials`: Liste des mat√©riaux sous forme JSON (optionnel).
     - `status`: Statut du projet (`ProjectStatus`).
     - `createdAt`: Date de cr√©ation (par d√©faut, maintenant).
     - `updatedAt`: Date de mise √† jour (automatique).
   - **Relations**:
     - Li√© √† un unique `User`, plusieurs **Document**, **Quote**, **Task**. 
     - Peut avoir plusieurs **ProjectCompany** et **Chat**.

5. **Company**
   - **Attributs**:
     - `id`: Identifiant unique de l'entreprise (UUID).
     - `userId`: R√©f√©rence √† l'utilisateur propri√©taire de l'entreprise (UUID).
     - `name`: Nom de l'entreprise.
     - `industry`: Secteur d'activit√©.
     - `description`: Description de l'entreprise (optionnelle).
     - `createdAt`: Date de cr√©ation (par d√©faut, maintenant).
   - **Relations**:
     - Li√© √† un unique `User`, plusieurs **ProjectCompany**, **Quote**, et **Review**.

6. **ProjectCompany**
   - **Attributs**:
     - `id`: Identifiant unique de l'association entre projet et entreprise (UUID).
     - `projectId`: R√©f√©rence au projet (UUID).
     - `companyId`: R√©f√©rence √† l'entreprise (UUID).
   - **Relations**:
     - Li√© √† un unique `Project` et une unique `Company`.

7. **Quote**
   - **Attributs**:
     - `id`: Identifiant unique du devis (UUID).
     - `projectId`: R√©f√©rence au projet (UUID).
     - `companyId`: R√©f√©rence √† l'entreprise (UUID).
     - `totalCost`: Co√ªt total du devis.
     - `details`: D√©tails du devis sous forme JSON.
     - `availability`: Disponibilit√© pour commencer le projet (optionnel).
     - `estimatedDuration`: Dur√©e estim√©e pour les travaux (optionnel).
     - `status`: Statut du devis (`QuoteStatus`).
     - `createdAt`: Date de cr√©ation (par d√©faut, maintenant).
   - **Relations**:
     - Li√© √† un unique `Project` et une unique `Company`.

8. **Chat**
   - **Attributs**:
     - `id`: Identifiant unique de la conversation (UUID).
     - `projectId`: R√©f√©rence au projet (non nullable).
     - `createdAt`: Date de cr√©ation (par d√©faut, maintenant).
   - **Relations**:
     - Li√© √† un unique `Project` et plusieurs `Message`.

9. **Message**
   - **Attributs**:
     - `id`: Identifiant unique du message (UUID).
     - `chatId`: R√©f√©rence au chat (UUID).
     - `userId`: R√©f√©rence √† l'utilisateur qui a envoy√© le message (UUID).
     - `content`: Contenu du message.
     - `createdAt`: Date de cr√©ation (par d√©faut, maintenant).
   - **Relations**:
     - Li√© √† un unique `Chat` et un unique `User`.

10. **Document**
    - **Attributs**:
      - `id`: Identifiant unique du document (UUID).
      - `projectId`: R√©f√©rence au projet (UUID).
      - `type`: Type de document (`DocumentType`).
      - `url`: URL ou chemin vers le document.
      - `createdAt`: Date de cr√©ation (par d√©faut, maintenant).
    - **Relations**:
      - Li√© √† un unique `Project`.

11. **Task**
    - **Attributs**:
      - `id`: Identifiant unique de la t√¢che (UUID).
      - `projectId`: R√©f√©rence au projet (UUID).
      - `title`: Titre de la t√¢che.
      - `description`: Description de la t√¢che (optionnelle).
      - `status`: Statut de la t√¢che (`TaskStatus`).
      - `startDate`: Date de d√©but (optionnelle).
      - `endDate`: Date de fin (optionnelle).
      - `createdAt`: Date de cr√©ation (par d√©faut, maintenant).
    - **Relations**:
      - Li√© √† un unique `Project`.

12. **Payment**
    - **Attributs**:
      - `id`: Identifiant unique du paiement (UUID).
      - `userId`: R√©f√©rence √† l'utilisateur effectuant le paiement (UUID).
      - `amount`: Montant du paiement.
      - `status`: Statut du paiement (`PaymentStatus`).
      - `createdAt`: Date de cr√©ation (par d√©faut, maintenant).
    - **Relations**:
      - Li√© √† un unique `User`.

13. **Notification**
    - **Attributs**:
      - `id`: Identifiant unique de la notification (UUID).
      - `userId`: R√©f√©rence √† l'utilisateur (UUID).
      - `content`: Contenu de la notification.
      - `isRead`: Indique si la notification a √©t√© lue (par d√©faut, faux).
      - `createdAt`: Date de cr√©ation (par d√©faut, maintenant).
    - **Relations**:
      - Li√© √† un unique `User`.

14. **Review**
    - **Attributs**:
      - `id`: Identifiant unique de l'√©valuation (UUID).
      - `userId`: R√©f√©rence √† l'utilisateur ayant laiss√© l'√©valuation (UUID).
      - `companyId`: R√©f√©rence √† l'entreprise √©valu√©e (UUID).
      - `rating`: Note donn√©e √† l'entreprise.
      - `comment`: Commentaire laiss√© par l'utilisateur (optionnel).
      - `createdAt`: Date de cr√©ation (par d√©faut, maintenant).
    - **Relations**:
      - Li√© √† un unique `User` et une unique `Company`.

15. **ActivityLog**
    - **Attributs**:
      - `id`: Identifiant unique de l'activit√© (UUID).
      - `userId`: R√©f√©rence √† l'utilisateur ayant effectu√© l'action (UUID).
      - `projectId`: R√©f√©rence au projet (optionnel, UUID).
      - `action`: Type d'action effectu√©e.
      - `createdAt`: Date de cr√©ation (par d√©faut, maintenant).
    - **Relations**:
      - Li√© √† un unique `User` et √©ventuellement un `Project`.

###### 2.2.2.2.3 Synth√®se des Relations

- Un **User** peut avoir plusieurs **Profile**, **Project**, **Company**, **Message**, **Payment**, **Notification**, et une **Subscription**.
- Un **Project** est associ√© √† un **User** et peut avoir plusieurs **Quote**, **Document**, **Task**, et **Chat**.
- Une **Company** peut √™tre associ√©e √† plusieurs **ProjectCompany** et avoir plusieurs **Quote**.
- Les **Chat** contiennent plusieurs **Message**, chaque message √©tant envoy√© par un **User**.

---

##### 2.2.2.3. Diagramme Entit√©-Relation

![Sch√©ma ER](https://via.placeholder.com/600x400)

**L√©gende du Diagramme**:
- Les entit√©s principales avec leurs attributs et les lignes indiquant les relations (1:n ou n:m) entre elles.
- Chaque entit√© est repr√©sent√©e avec son identifiant unique et ses associations.

---

##### 2.2.2.4. Conclusion

Le sch√©ma de la base de donn√©es de Byld a √©t√© con√ßu pour fournir une structure solide et flexible, apte √† r√©pondre aux besoins fonctionnels de la plateforme et √† assurer une gestion fluide des informations. Ce mod√®le garantit √©galement que les relations logiques entre les entit√©s sont respect√©es, facilitant ainsi l'extension et la maintenance de l'application selon l'√©volution des exigences futures.